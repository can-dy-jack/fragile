"use strict";(self.webpackChunkkartjim=self.webpackChunkkartjim||[]).push([[101],{5666:(e,a,t)=>{t.r(a),t.d(a,{data:()=>n});const n={key:"v-7271db30",path:"/php/php01.html",title:"php环境配置",lang:"zh",frontmatter:{title:"php环境配置",pageClass:"php01-page"},excerpt:"",headers:[{level:2,title:"搭建开发环境",slug:"搭建开发环境",children:[{level:3,title:"Apache",slug:"apache",children:[]},{level:3,title:"PHP",slug:"php",children:[]}]},{level:2,title:"bug解决",slug:"bug解决",children:[{level:3,title:"the requested operation has failed",slug:"the-requested-operation-has-failed",children:[]}]}],filePathRelative:"php/php01.md",git:{updatedTime:1638449046e3,contributors:[{name:"can-dy-jack",email:"jjack_chen3@163.com",commits:1}]}}},4700:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});var n=t(6252);const p={class:"custom-container warning"},c=(0,n._)("p",{class:"custom-container-title"},"警告",-1),s=(0,n.Uk)("本文首发在"),l={href:"https://kartjim.top/delicate",target:"_blank",rel:"noopener noreferrer"},i=(0,n.Uk)("个人博客"),d=(0,n.Uk)("；"),o=(0,n.uE)('<h2 id="搭建开发环境" tabindex="-1"><a class="header-anchor" href="#搭建开发环境" aria-hidden="true">#</a> 搭建开发环境</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>解析和执行PHP脚本，需要安装PHP运行环境； PHP既可以独立运行，也可以作为Apache的模块运行；本文主要介绍PHP为apache的模块运行。</p></div><h3 id="apache" tabindex="-1"><a class="header-anchor" href="#apache" aria-hidden="true">#</a> Apache</h3><h4 id="获取apache" tabindex="-1"><a class="header-anchor" href="#获取apache" aria-hidden="true">#</a> 获取apache</h4>',4),r=(0,n.Uk)("去官网可获取apache的源码："),h={href:"https://httpd.apache.org/",target:"_blank",rel:"noopener noreferrer"},u=(0,n.Uk)("apache"),m=(0,n.Uk)("，但没有提供编译后的apache。 我们可以从apache官网上找到第三方打包后的apache，比如说："),g={href:"https://www.apachelounge.com/",target:"_blank",rel:"noopener noreferrer"},b=(0,n.Uk)("Apache Lounge"),P=(0,n.Uk)("： "),v=(0,n._)("img",{src:"https://i.loli.net/2021/11/26/ryjfbPYU1l4SEmv.png",alt:"1.png"},null,-1),f=(0,n.Uk)(" 这里我选择"),x=(0,n._)("code",null,"httpd-2.4.51-win64-VS16.zip",-1),k=(0,n.Uk)("下载。"),H=(0,n.uE)('<p>下载好之后解压文件，准备好一个文件夹把解压得到的文件放里面。 我就存放在f盘下：<code>F:\\PHP\\LAMP\\apache\\Apache24</code>，其中目录结构如下图： <img src="https://i.loli.net/2021/11/26/MfbIwcVlma5o3Ng.png" alt="f"> 其中：</p><table><thead><tr><th style="text-align:center;">文件夹</th><th style="text-align:center;">作用</th></tr></thead><tbody><tr><td style="text-align:center;">bin</td><td style="text-align:center;">存放Apache应用程序</td></tr><tr><td style="text-align:center;">conf</td><td style="text-align:center;">存放配置文件</td></tr><tr><td style="text-align:center;">htdocs</td><td style="text-align:center;">默认的网站根目录</td></tr><tr><td style="text-align:center;">modules</td><td style="text-align:center;">存放模块</td></tr></tbody></table><h4 id="配置apache" tabindex="-1"><a class="header-anchor" href="#配置apache" aria-hidden="true">#</a> 配置Apache</h4><p>打开apache配置文件（conf文件夹下的httpd.conf）</p><blockquote><p>在<code>httpd.conf</code>里，&quot;#&quot; 是注释符</p></blockquote><p>（1）、配置Apache安装路径 把<code>Define SRVROOT &quot;c:/apache24&quot;</code>改为：（大概第37行）</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>Define SRVROOT <span class="token string">&quot;F:/PHP/LAMP/apache/Apache24&quot;</span> <span class="token comment"># 后面填上你自己的apache路径！</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>（2）、配置服务器域名 搜索<code>ServerName</code>，找到<code>#ServerName www.example.com:80</code> 因为暂时没有域名，所以取消注释即可（{% color #ef0105 不取消注释之后会报错 %}）。</p><h4 id="安装apache" tabindex="-1"><a class="header-anchor" href="#安装apache" aria-hidden="true">#</a> 安装apache</h4><p>以管理员身份运行cmd，并切换到apache的bin目录之下，输入一下命令进行安装：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>httpd -k <span class="token function">install</span> -n apacheName\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>-n</code>之后是apache的名称，任意取。</p><p>如果需要卸载：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>httpd -k uninstall -n apacheName\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="启动apache" tabindex="-1"><a class="header-anchor" href="#启动apache" aria-hidden="true">#</a> 启动apache</h4><p>在安装好apache之后，去bin目录下找到程序<code>ApacheMonitor.exe</code>，双击即可启动。</p><blockquote><p>这是会发现任务栏里会有图标； 可以单击管理程序的开始与停止。</p></blockquote><p>启动之后，打开浏览器，输入<code>http://localhost/</code>即可看到apache已经成功启动。</p><p>上面提到过<code>htdocs</code>文件夹是默认的网站根目录，里面有一个<code>index.html</code>文件，上面你看到的页面就是这个文件。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>现在你可以随意修改它，并且在浏览器查看效果！ {% endnote %} <img src="https://i.loli.net/2021/11/26/N5nAfeTLpOPd3iB.png" alt="image.png"> {% note primary %} 你甚至可以在其它设备的浏览器 通过你的电脑的IP地址 查看效果！</p></div><h3 id="php" tabindex="-1"><a class="header-anchor" href="#php" aria-hidden="true">#</a> PHP</h3><h4 id="php的优势" tabindex="-1"><a class="header-anchor" href="#php的优势" aria-hidden="true">#</a> PHP的优势</h4><ul><li>开源免费</li><li>跨平台型</li><li>面向对象</li><li>支持多种数据库</li><li>快捷性</li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><p>语法与使用方式十分接近 本博客框架使用的语言 ejs</p></div><blockquote><p>尽管PHP的优势现在已经不太明显，但还是有必要学一下； 有利于理解后端的知识，并在学习的过程中掌握更多网络相关的知识，不只是PHP；</p></blockquote><h4 id="获取php" tabindex="-1"><a class="header-anchor" href="#获取php" aria-hidden="true">#</a> 获取PHP</h4>',26),y=(0,n.Uk)("你可以去"),q={href:"https://www.php.net/",target:"_blank",rel:"noopener noreferrer"},_=(0,n.Uk)("PHP官网"),A=(0,n.Uk)("找到最新版的PHP。"),w=(0,n.uE)('<div class="custom-container tip"><p class="custom-container-title">提示</p><p>但是，在下载之前你需要特别注意apache支持的PHP版本；如果你下载最新版本的PHP，但是你使用的apache并不支持，就会报错。</p></div><p>还有，PHP官网会提供两种版本的PHP，一个是<code>&#39;Thread Safe&#39;（线程安全）</code>版本，一个是<code>&#39;Non Thread Safe&#39;（非线程安全）</code>版本； 如果你使用apache运行PHP，则必须下载<code>&#39;Thread Safe&#39;（线程安全）</code>版本！</p><h4 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h4><p>解压下载好的PHP，放进准备好的文件夹，这里我放在f盘：<code>F:\\PHP\\LAMP\\php7.3</code>;文件目录结构如下： <img src="https://i.loli.net/2021/11/26/gumVS3yGfpFZjX1.png" alt="image.png"></p><table><thead><tr><th style="text-align:center;">文件/目录</th><th style="text-align:center;">作用</th></tr></thead><tbody><tr><td style="text-align:center;">ext/</td><td style="text-align:center;">拓展文件存放</td></tr><tr><td style="text-align:center;">php.exe</td><td style="text-align:center;">PHP程序</td></tr><tr><td style="text-align:center;">php7apache2_4.dll</td><td style="text-align:center;">用于apache的Dll模块</td></tr><tr><td style="text-align:center;">libssh2.dll</td><td style="text-align:center;">用于apache的Dll模块</td></tr></tbody></table><p>PHP配置文件是<code>php.ini</code>，但是默认是没有的，只有<code>php.ini-development</code>和<code>php.ini-production</code>两个示例配置文件。 从名字上来看，很容易理解这两个文件的作用，<code>php.ini-development</code>用于开发阶段，而<code>php.ini-production</code>用于生产阶段。</p><p>所以我们暂时使用<code>php.ini-development</code>，新建<code>php.ini</code>文件，将<code>php.ini-development</code>复制一份到<code>php.ini</code>。</p><blockquote><p>注：在<code>php.ini</code>里，<code>;</code>是注释符。</p></blockquote><p>修改以下： （1）、搜索<code>extension_dir</code>找到<code>;extension_dir = &quot;ext&quot;</code>,修改为</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">extension_dir</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;<span class="token inner-value">F:\\PHP\\LAMP\\php7.3\\ext</span>&quot;</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>后面填写你的 php中的ext 所在目录</p><p>（2）、查找<code>date.timezone</code>,将<code>;date.timezone</code>,修改为：</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">date.timezone</span> <span class="token punctuation">=</span> <span class="token value attr-value">UTC</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>后面填 <code>UTC</code>（世界时）、 <code>PRC</code> （中国时区）或 <code>Asia/Shanghai</code>（上海） 等时区。</p><h4 id="在apache中引用php模块" tabindex="-1"><a class="header-anchor" href="#在apache中引用php模块" aria-hidden="true">#</a> 在Apache中引用PHP模块</h4><p>回到apache配置文件，在大约186行，引入PHP模块； 在其中插入以下代码：</p><div class="language-conf ext-conf line-numbers-mode"><pre class="language-conf"><code>LoadModule php7_module &quot;F:/PHP/LAMP/php7.3/php7apache2_4.dll&quot;\n&lt;FilesMatch &quot;\\.php$&quot;&gt;\n    setHandler application/x-httpd-php\n&lt;/FilesMatch&gt;\nPHPIniDir &quot;F:/PHP/LAMP/php7.3&quot;\nLoadFile &quot;F:/PHP/LAMP/php7.3/libssh2.dll&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-container danger"><p class="custom-container-title">DANGER</p><p>注意需要将后面的路径换成你自己的！</p></div><p>之后查找<code>dir_module</code>,将</p><div class="language-conf ext-conf line-numbers-mode"><pre class="language-conf"><code>&lt;IfModule dir_module&gt;\n    DirectoryIndex index.html\n&lt;/IfModule&gt;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>改为：</p><div class="language-conf ext-conf line-numbers-mode"><pre class="language-conf"><code>&lt;IfModule dir_module&gt;\n    DirectoryIndex index.html index.php\n&lt;/IfModule&gt;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>即，把<code>index.php</code>当做第二默认文件。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>点击apache图标，重新启动apache（Restart）。 <img src="https://i.loli.net/2021/11/26/yELObGFx1twVn5S.png" alt="image.png"> 如果没有报错，即为配置成功！</p></div><h4 id="测试php模块" tabindex="-1"><a class="header-anchor" href="#测试php模块" aria-hidden="true">#</a> 测试PHP模块</h4><p>在<code>htdocs</code>目录下新建<code>index.php</code>，删去<code>index.html</code>； 打开<code>index.php</code>，写入：</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>\n  <span class="token keyword">echo</span> <span class="token string single-quoted-string">&#39;Hello PHP!&#39;</span><span class="token punctuation">;</span>\n<span class="token delimiter important">?&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>打开浏览器，访问<code>http://localhost/</code>，即可看到运行成功： <img src="https://i.loli.net/2021/11/26/VDUcdplnmg3vJSN.png" alt="image.png"></p><h2 id="bug解决" tabindex="-1"><a class="header-anchor" href="#bug解决" aria-hidden="true">#</a> bug解决</h2><h3 id="the-requested-operation-has-failed" tabindex="-1"><a class="header-anchor" href="#the-requested-operation-has-failed" aria-hidden="true">#</a> the requested operation has failed</h3><p>造成<code>the requested operation has failed</code>的原因有很多：</p><ol><li>你使用的apache版本并不支持你使用的PHP版本</li></ol><p>简单来讲就是你使用的PHP版本不在 apache支持的PHP版本</p><p>这个时候需要去百度你使用的apache版本支持哪个版本的PHP，然后重新安装PHP环境与配置。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>例如，我使用的是Apache/2.4.51 (Win64) ，第一次下载的PHP是7.4版本的，报错。之后改用PHP7.3就成功运行。</p></div><ol start="2"><li>你下载的PHP不是&#39;Thread Safe&#39;（线程安全）版本</li></ol>',36),U={},M=(0,t(3744).Z)(U,[["render",function(e,a){const t=(0,n.up)("OutboundLink");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",p,[c,(0,n._)("p",null,[s,(0,n._)("a",l,[i,(0,n.Wm)(t)]),d])]),o,(0,n._)("p",null,[r,(0,n._)("a",h,[u,(0,n.Wm)(t)]),m,(0,n._)("a",g,[b,(0,n.Wm)(t)]),P,v,f,x,k]),H,(0,n._)("p",null,[y,(0,n._)("a",q,[_,(0,n.Wm)(t)]),A]),w],64)}]])},3744:(e,a)=>{a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[e,n]of a)t[e]=n;return t}}}]);